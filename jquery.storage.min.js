(function(a){var b={create:function(a,b,c){var d=new Date,e="",f=24*60*60*1e3;if(c){d.setTime(d.getTime()+c*f);var e="; expires="+d.toGMTString()}document.cookie=a+"="+b+e+"; path=/";return true},getItem:function(a){var b=a+"=",c=document.cookie.split(";"),d=0,e;for(;d<c.length;d++){e=c[d];while(e.charAt(0)==" "){e=e.substring(1,e.length)}if(e.indexOf(b)==0){return e.substring(b.length,e.length)}}return null},clear:function(){var a=document.cookie.split(";"),b=0;for(;b<a.length;b++){this.removeItem(a[b].split("=")[0])}},removeItem:function(a){return this.create(a,"",-1)},setItem:function(a,b){return this.create(a,b)}};var c={session:{enabled:true,storageInterface:window.sessionStorage},local:{enabled:true,storageInterface:window.localStorage},cookie:{enabled:true,storageInterface:b}};var d={init:function(b){this.params=a.extend({fallback:true,verbose:true},b);if(!window.localStorage){c["local"].enabled=false}if(!window.sessionStorage){c["session"].enabled=false}return this},set:function(a,b,c){var d=this.__parseKeyValues(a,b),c=this.__catchContext(c);return this.__addObjectIn(d,c)},setLocal:function(a,b){return this.set(a,b,"local")},setSession:function(a,b){return this.set(a,b,"session")},setCookie:function(a,b){return this.set(a,b,"cookie")},__parseKeyValues:function(a,b){if(b){var c={};c[a]=b;return c}else{if(typeof a=="object"){return a}}},__catchContext:function(a){var a=a||false;if(!a){return false}if(this.__isSupported(a)){return a}else if(this.params.fallback){return"cookie"}else if(this.params.verbose){throw a+"Storage is not supported"}},__isSupported:function(a){return c[a].enabled},__addObjectIn:function(a,b){var d,e;for(d in a){if(a.hasOwnProperty(d)){e=this.__stringifyValue(a[d]);c[b].storageInterface.setItem(d,e)}}return true},__stringifyValue:function(a){if(typeof a=="object"){if(typeof JSON!="undefined"){return JSON.stringify(a)}else if(this.params.verbose){throw"JSON is needed but unsupported !"}else{return false}}return a},get:function(a,b,d){var d=this.__catchContext(d),e;if(!d){e=this.__getFromAllContexts(a)}else{e=c[d].storageInterface.getItem(a)}if(e==null){return this.__getDefaultValue(a,b,d)}return this.__getValue(e)},getFromLocal:function(a,b){return this.get(a,b,"local")},getFromSession:function(a,b){return this.get(a,b,"session")},getFromCookie:function(a,b){return this.get(a,b,"cookie")},__getDefaultValue:function(a,b,c){if(!c){c="cookie"}if(b){this.set(a,b,c);return b}else{return null}},__getValue:function(b){try{return a.parseJSON(b)}catch(c){return b}},__getFromAllContexts:function(a){var b,d;for(b in c){if(c.hasOwnProperty(b)){d=c[b].storageInterface.getItem(a);if(d!=null){return d}}}return null},remove:function(a,b){var b=this.__catchContext(b);if(!b){return this.__removeFromAllContexts(a)}else{return c[b].storageInterface.removeItem(a)}},removeFromLocal:function(a){this.remove(a,"local")},removeFromSession:function(a){this.remove(a,"session")},removeFromCookie:function(a){this.remove(a,"cookie")},__removeFromAllContexts:function(a){var b;for(b in c){if(c.hasOwnProperty(b)){c[b].storageInterface.removeItem(a)}}return true},flush:function(a){var a=this.__catchContext(a);if(!a){this.__clearAllStorages()}else{c[a].storageInterface.clear()}},__clearAllStorages:function(){var a;for(a in c){if(c.hasOwnProperty(a)){c[a].storageInterface.clear()}}}};a.storage=d.init()})(jQuery)